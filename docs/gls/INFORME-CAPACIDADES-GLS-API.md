# üìä INFORME COMPLETO: Capacidades API GLS para LoviPrintDTF

**Fecha:** 22 de Octubre, 2025
**Proyecto:** LoviPrintDTF - Integraci√≥n GLS Espa√±a
**Documentaci√≥n analizada:** 15 archivos oficiales de GLS

---

## üéØ RESUMEN EJECUTIVO

La API de GLS B2B ofrece una plataforma completa de gesti√≥n de env√≠os con capacidades de:
- ‚úÖ **Creaci√≥n autom√°tica de env√≠os**
- ‚úÖ **Generaci√≥n de etiquetas en m√∫ltiples formatos**
- ‚úÖ **Tracking en tiempo real con historial completo**
- ‚úÖ **Obtenci√≥n de POD (Proof of Delivery) con firma digitalizada**
- ‚úÖ **Gesti√≥n de servicios especiales** (reembolso, retorno, seguros, etc.)
- ‚úÖ **Env√≠os nacionales e internacionales**
- ‚úÖ **Integraci√≥n con ParcelShops**

---

## üîß 1. M√âTODOS DISPONIBLES EN LA API

### **1.1. GrabaServicios** (Crear Env√≠o)
**Endpoint:** `https://wsclientes.asmred.com/b2b.asmx`
**M√©todo SOAP:** `GrabaServicios`

**Funcionalidad:**
- Crear uno o varios env√≠os (hasta 20 por llamada para eficiencia)
- Generar tracking number autom√°ticamente
- Asignar n√∫mero de expedici√≥n (codexp)
- Generar c√≥digo de barras GLS
- Obtener UID √∫nico del env√≠o

**Respuesta incluye:**
- `codbarras`: C√≥digo de barras (14 d√≠gitos base + 3 d√≠gitos bulto + checksum)
- `uid`: Identificador √∫nico del env√≠o
- `codexp`: N√∫mero de expedici√≥n GLS
- `Referencias`: Referencias tipo C (cliente) y tipo N (internacional)
- `Etiquetas`: PDFs/im√°genes base64 (si se solicita)

---

### **1.2. EtiquetaEnvioV2** (Obtener Etiqueta)
**M√©todo SOAP:** `EtiquetaEnvioV2`

**Funcionalidad:**
- Descargar etiqueta de un env√≠o ya creado
- M√∫ltiples formatos disponibles
- Funciona SOLO con env√≠os NO entregados

**Formatos disponibles:**
- **PDF** - Para impresoras l√°ser/inkjet (A4)
- **ZPL** - Zebra Programming Language (impresoras t√©rmicas Zebra)
- **EPL** - Eltron Programming Language (impresoras t√©rmicas Eltron)
- **DPL** - Datamax Programming Language (impresoras Datamax)
- **JPG** - Imagen JPEG
- **PNG** - Imagen PNG

**Par√°metros:**
- `uidcliente`: Tu ID de cliente GLS
- `codigo`: Referencia del env√≠o (tipo C)
- `tipoEtiqueta`: Formato deseado (PDF, ZPL, JPG, etc.)

---

### **1.3. GetExpCli** (Buscar Env√≠o por Referencia)
**M√©todo SOAP:** `GetExpCli`

**Funcionalidad:**
- Buscar env√≠os por referencia de cliente
- Obtener informaci√≥n completa del env√≠o
- Ver historial de tracking completo
- Acceder a digitalizaciones (POD, DNI, etc.)

**Datos que retorna:**
- **Identificaci√≥n:** expedici√≥n, albar√°n, codexp, codbarras, uidExp
- **Fechas:** fecha env√≠o, fecha prevista entrega, fecha POD
- **Remitente:** nombre, direcci√≥n, ciudad, CP, pa√≠s, tel√©fono, NIF
- **Destinatario:** nombre, direcci√≥n, ciudad, CP, pa√≠s, tel√©fono, NIF
- **Servicio:** tipo servicio, horario, portes, bultos, peso, volumen
- **Estado actual:** c√≥digo estado, descripci√≥n, incidencias
- **Tracking completo:** historial de eventos con fechas y agencias
- **Digitalizaciones:** URLs a im√°genes de POD, DNI, firmas

---

### **1.4. GetExp** (Buscar Env√≠o por UID)
**M√©todo SOAP:** `GetExp`

**Funcionalidad:**
- Similar a GetExpCli pero busca por UID del env√≠o
- Ideal cuando ya tienes el UID guardado en tu BD
- Retorna la misma informaci√≥n completa

**Par√°metro:**
- `uid`: UID del env√≠o (ejemplo: CB44F47B-19C2-429F-AEDE-xxxxxxxxxxxx)

---

## üì¶ 2. SERVICIOS DE ENV√çO DISPONIBLES

### **2.1. Servicios Nacionales (Espa√±a)**

| C√≥digo | Nombre | Descripci√≥n |
|--------|--------|-------------|
| **96** | BusinessParcel | Servicio est√°ndar 24-48h Espa√±a y Portugal |
| **1** | Courier | Servicio urgente con franja horaria |
| **37** | Economy | Servicio econ√≥mico 48-72h |

### **2.2. Servicios Internacionales (Europa)**

| C√≥digo | Nombre | Pa√≠ses |
|--------|--------|--------|
| **74** | EuroBusinessParcel | 44 pa√≠ses europeos (ver lista completa) |
| **76** | EuroBusinessParcel Plus | Con servicios adicionales |

**Pa√≠ses EuroBusinessParcel (44 destinos):**
- Europa Occidental: Alemania (49/DE), Francia (33/FR), Italia (39/IT), Reino Unido (44/GB)
- Benelux: B√©lgica (32/BE), Holanda (31/NL), Luxemburgo (352/LU)
- Europa del Este: Polonia (48/PL), Rep√∫blica Checa (42/CZ), Hungr√≠a (36/HU)
- N√≥rdicos: Suecia (46/SE), Noruega (47/NO), Dinamarca (45/DK), Finlandia (358/FI)
- Pen√≠nsula Ib√©rica: Portugal (351/PT), Andorra (9738/AD)
- Otros: Austria, Bulgaria, Croacia, Eslovaquia, Eslovenia, etc.

**IMPORTANTE:** Reino Unido requiere Incoterm desde 2021 (Brexit)

### **2.3. Franjas Horarias**

| C√≥digo | Descripci√≥n |
|--------|-------------|
| **18** | Sin franja espec√≠fica (est√°ndar) |
| **3** | Express 19:00 |
| **2** | 14:00 Service |
| **19** | ParcelShop (entrega en punto de recogida) |

---

## üé® 3. CAPACIDADES DE ETIQUETAS

### **3.1. Generaci√≥n en Inserci√≥n**
Puedes solicitar la etiqueta inmediatamente al crear el env√≠o:

```xml
<DevuelveAdicionales>
  <Etiqueta tipo="PDF"></Etiqueta>
  <!-- Formatos: EPL, ZPL, DPL, JPG, PNG, PDF -->
</DevuelveAdicionales>
```

**Modos disponibles:**
- **Est√°ndar:** Una etiqueta para todo el env√≠o
- **EtixBulto:** Una etiqueta por bulto (solo EPL y PDF)

### **3.2. Obtenci√≥n Posterior**
Con el m√©todo `EtiquetaEnvioV2` puedes:
- Reimprimir etiquetas perdidas
- Cambiar de formato (de PDF a ZPL, por ejemplo)
- Descargar etiquetas cuando sea necesario

### **3.3. Formatos seg√∫n Impresora**

| Tipo Impresora | Formato Recomendado | Uso |
|----------------|---------------------|-----|
| L√°ser/Inkjet | PDF | Oficina est√°ndar |
| Zebra T√©rmica | ZPL | Almac√©n/producci√≥n |
| Eltron T√©rmica | EPL | Almac√©n/producci√≥n |
| Datamax T√©rmica | DPL | Almac√©n/producci√≥n |
| Cualquiera | JPG/PNG | Versatilidad |

---

## üìç 4. TRACKING Y TRAZABILIDAD

### **4.1. Informaci√≥n de Tracking**

Cada evento incluye:
- **Fecha y hora** exacta del evento
- **Tipo de evento:** ESTADO, ENTREGA, POD, FACTURA, URLPARTNER
- **C√≥digo de agencia** GLS donde ocurri√≥
- **Nombre de agencia**
- **Descripci√≥n del evento**
- **C√≥digo de estado** (0-7)
- **Prioridad** del evento

### **4.2. Estados del Env√≠o**

| C√≥digo | Estado | Descripci√≥n |
|--------|--------|-------------|
| **0** | Recibida informaci√≥n | Env√≠o registrado en sistema |
| **3** | En delegaci√≥n destino | Lleg√≥ a agencia de destino |
| **6** | En reparto | Sali√≥ para entrega |
| **7** | Entregado | Entregado correctamente |

### **4.3. Eventos de Tracking T√≠picos**

1. **RECIBIDA INFORMACION** - Expedici√≥n creada
2. **EN TRANSITO** - Sali√≥ de agencia origen
3. **EN DELEGACION DESTINO** - Lleg√≥ a agencia final
4. **EN REPARTO** - Asignado a repartidor
5. **ENTREGADO** - Entrega completada con POD

### **4.4. Digitalizaciones**

GLS digitaliza y guarda:
- **POD (Proof of Delivery):** Albar√°n firmado
- **FIRMA:** Firma digital del destinatario
- **DNI:** Foto del DNI (con servicio "Identif√≠cate")
- **FOTO BULTO:** Imagen del paquete entregado

**Acceso a im√°genes:**
URLs directas a JPGs hospedados en `pods.asmred.com`

---

## üíº 5. SERVICIOS ADICIONALES DISPONIBLES

### **5.1. Servicios con Coste**

| Servicio | Tag XML | Valores | Descripci√≥n |
|----------|---------|---------|-------------|
| **Reembolso (COD)** | `<Reembolso>` | Importe en ‚Ç¨ | Cliente paga al recibir |
| **Seguro** | `<Seguro tipo="">` | 0/1/2 | Asegurar mercanc√≠a |
| **POD Obligatorio** | `<PODObligatorio>` | S/N | Exigir firma |
| **Identif√≠cate** | `<DNINomb>` | 6 | Solo destinatario puede recibir |
| **Identif√≠cate+Foto** | `<DNINomb>` | 8 | + Foto ambas caras DNI |
| **Entrega en Buz√≥n** | `<DNINomb>` | 11 | Permitir buz√≥n |

### **5.2. Servicios Log√≠sticos**

| Servicio | Tag XML | Valores | Descripci√≥n |
|----------|---------|---------|-------------|
| **SWAP/Retorno** | `<Retorno>` | 0/1/2 | Recoger mercanc√≠a en entrega |
| **RCS/POD** | `<Pod>` | S/N | Devolver albar√°n firmado |
| **ParcelShop** | `<Horario>19` + `<Codigo>` | C√≥digo punto | Entrega en punto de recogida |

### **5.3. Servicios Internacionales**

**Incoterms para env√≠os fuera UE:**
- **10 - DDP:** Remitente paga todo (flete, aduanas, impuestos)
- **18 - DDP:** Remitente paga todo (para UK <135GBP)
- **20 - DAP:** Destinatario paga aduanas e impuestos
- **25 - DAP:** Destinatario paga antes de entrega
- **30 - DDP sin IVA:** Destinatario paga IVA
- **40 - DAP despachado:** Remitente paga aduanas, destinatario impuestos

---

## ü§ñ 6. CAPACIDADES DE AUTOMATIZACI√ìN PARA LOVIPRINTDTF

### **6.1. Flujo Autom√°tico Actual Posible**

```
PEDIDO PAGADO
    ‚Üì
PEDIDO EN COLA DE IMPRESI√ìN
    ‚Üì
ADMIN MARCA "IMPRESO"
    ‚Üì
[AUTOM√ÅTICO] Crear env√≠o GLS via API
    ‚Üì
[AUTOM√ÅTICO] Generar etiqueta PDF
    ‚Üì
[AUTOM√ÅTICO] Guardar tracking number en BD
    ‚Üì
[AUTOM√ÅTICO] Enviar email cliente con tracking
    ‚Üì
PEDIDO LISTO PARA ENVIAR (estado READY)
```

### **6.2. Flujo Autom√°tico con Tracking**

**Webhook/Cron cada 1 hora:**
```
PEDIDOS EN TR√ÅNSITO
    ‚Üì
[AUTOM√ÅTICO] Consultar estado en GLS (GetExpCli)
    ‚Üì
[AUTOM√ÅTICO] Actualizar estado en BD
    ‚Üì
SI ESTADO = ENTREGADO:
    ‚Üì
    [AUTOM√ÅTICO] Enviar email "Tu pedido ha sido entregado"
    ‚Üì
    [AUTOM√ÅTICO] Cambiar estado a DELIVERED
    ‚Üì
    [AUTOM√ÅTICO] Solicitar review del producto
```

### **6.3. Mejoras de Experiencia de Usuario**

**Panel de Cliente (`/pedidos/[orderNumber]`):**
- ‚úÖ Mostrar tracking number clickeable
- ‚úÖ Timeline visual del estado del env√≠o
- ‚úÖ Fecha estimada de entrega
- ‚úÖ Notificaciones push cuando cambia estado
- ‚úÖ Bot√≥n "¬øD√≥nde est√° mi pedido?" ‚Üí tracking GLS

**Panel Admin (`/admin/pedidos`):**
- ‚úÖ Vista de todos los env√≠os activos
- ‚úÖ Filtrar por estado (En tr√°nsito, Entregado, etc.)
- ‚úÖ Alertas de incidencias
- ‚úÖ Reimprimir etiquetas perdidas
- ‚úÖ Estad√≠sticas de entregas (% entregados en 24h, 48h)

### **6.4. Automatizaci√≥n de Comunicaciones**

**Emails autom√°ticos posibles:**
1. **"Tu pedido ha sido enviado"** - Cuando se crea el env√≠o GLS
2. **"Tu pedido est√° en camino"** - Estado "EN TRANSITO"
3. **"Tu pedido llega hoy"** - Estado "EN REPARTO"
4. **"Tu pedido ha sido entregado"** - Estado "ENTREGADO"
5. **"Incidencia en tu pedido"** - Si hay problema

**WhatsApp/SMS autom√°ticos:**
- Tracking URL cuando sale el env√≠o
- Aviso 1h antes de entrega (si GLS lo soporta)
- Confirmaci√≥n de entrega

---

## üìä 7. CASOS DE USO ESPEC√çFICOS PARA LOVIPRINTDTF

### **7.1. Impresi√≥n DTF para Empresas (B2B)**

**Escenario:** Cliente B2B hace pedido grande (50 transferencias)

**Flujo autom√°tico:**
1. Crear env√≠o con servicio **Courier (1)** + Franja **Express 19:00 (3)**
2. A√±adir **Seguro (tipo=1)** para valor alto
3. A√±adir **POD Obligatorio** para tener prueba firmada
4. Enviar etiqueta autom√°tica en formato **ZPL** a impresora t√©rmica
5. Notificar al cliente B2B con tracking y ETA

### **7.2. Env√≠os Internacionales (Europa)**

**Escenario:** Cliente de Francia pide transferencias DTF

**Flujo autom√°tico:**
1. Detectar pa√≠s del cliente (FR)
2. Cambiar servicio a **EuroBusinessParcel (74)**
3. Mantener horario **18** (est√°ndar)
4. Formato pa√≠s: **"FR"** o **"33"**
5. A√±adir tel√©fono m√≥vil con formato **"0033612345678"** (obligatorio)
6. Email obligatorio para notificaciones GLS
7. Generar etiqueta con datos aduaneros si aplica

### **7.3. Gesti√≥n de Incidencias**

**Escenario:** Cliente reporta que no recibi√≥ el pedido

**Flujo manual optimizado:**
1. Admin busca pedido en `/admin/pedidos/[id]`
2. Click en "Ver tracking GLS"
3. API consulta **GetExpCli** con referencia del pedido
4. Muestra historial completo de eventos
5. Si estado = "INCIDENCIA", muestra descripci√≥n
6. Si entregado, muestra **POD digitalizado** con firma
7. Admin puede enviar POD al cliente como prueba

### **7.4. Reembolso al Cliente**

**Escenario:** Cliente devuelve producto defectuoso

**Flujo con SWAP/Retorno:**
1. Admin marca pedido como "RETORNO SOLICITADO"
2. Crear env√≠o GLS con **`<Retorno>1</Retorno>`**
3. GLS recoge el paquete defectuoso cuando entrega uno nuevo
4. O programar recogida espec√≠fica
5. Tracking muestra recogida completada
6. Admin procesa reembolso

### **7.5. Entrega en ParcelShop**

**Escenario:** Cliente prefiere recoger en punto cercano

**Flujo:**
1. En checkout, mostrar mapa de ParcelShops GLS cercanos
2. Cliente selecciona punto de recogida
3. Crear env√≠o con:
   - **`<Horario>19</Horario>`** (ParcelShop)
   - **`<Codigo>XXXXX</Codigo>`** (c√≥digo del punto)
4. GLS entrega en el ParcelShop
5. Cliente recibe SMS de GLS para recoger

---

## üìà 8. ESTAD√çSTICAS Y ANALYTICS POSIBLES

Con la data de tracking de GLS puedes crear:

### **8.1. KPIs de Log√≠stica**

- **Tiempo medio de entrega** (desde env√≠o hasta entregado)
- **% Entregas en 24h, 48h, 72h**
- **% Entregas exitosas vs incidencias**
- **Zonas geogr√°ficas m√°s r√°pidas/lentas**
- **Agencias GLS con m√°s incidencias**

### **8.2. Dashboard de Env√≠os**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ENV√çOS ACTIVOS: 47                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  En tr√°nsito:        23  (48.9%)    ‚îÇ
‚îÇ  En reparto:         12  (25.5%)    ‚îÇ
‚îÇ  Entregados hoy:     12  (25.5%)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  RENDIMIENTO √öLTIMA SEMANA          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Entregas <24h:      85%  ‚¨ÜÔ∏è +5%    ‚îÇ
‚îÇ  Entregas <48h:      97%  ‚¨ÜÔ∏è +2%    ‚îÇ
‚îÇ  Incidencias:         3%  ‚¨áÔ∏è -1%    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **8.3. Alertas Proactivas**

- üö® **Env√≠o retrasado:** Si pasan 72h sin entrega
- üö® **Incidencia detectada:** Cliente en direcci√≥n incorrecta
- üö® **M√∫ltiples intentos fallidos:** Avisar al cliente
- üö® **Pico de env√≠os:** M√°s de 50 pedidos/d√≠a ‚Üí avisar a GLS

---

## üí° 9. OPORTUNIDADES DE MEJORA IDENTIFICADAS

### **9.1. Corto Plazo (1-2 semanas)**

1. ‚úÖ **Corregir estructura XML** - Implementar formato correcto
2. ‚úÖ **A√±adir campos obligatorios** - Fecha, Portes, Servicio, Horario
3. ‚úÖ **Mapeo de provincias** - Crear funci√≥n para obtener provincia desde CP
4. ‚úÖ **Formato pa√≠s correcto** - Usar c√≥digos num√©ricos GLS
5. ‚úÖ **Tracking autom√°tico** - Guardar tracking number en BD

### **9.2. Medio Plazo (1 mes)**

6. ‚úÖ **Sincronizaci√≥n de estados** - Cron que actualiza estados cada hora
7. ‚úÖ **Panel de tracking** - Timeline visual en p√°gina de pedido
8. ‚úÖ **Emails autom√°ticos** - Notificar cambios de estado
9. ‚úÖ **Reimpresi√≥n de etiquetas** - Bot√≥n en admin para regenerar
10. ‚úÖ **Gesti√≥n de incidencias** - Vista espec√≠fica para problemas

### **9.3. Largo Plazo (3 meses)**

11. ‚úÖ **Env√≠os internacionales** - Soporte para EuroBusinessParcel
12. ‚úÖ **ParcelShop integration** - Permitir entrega en puntos
13. ‚úÖ **Servicios premium** - Identif√≠cate, Reembolso, Seguros
14. ‚úÖ **Analytics dashboard** - Estad√≠sticas de env√≠os
15. ‚úÖ **Integraci√≥n multi-carrier** - A√±adir SEUR, Correos, etc.

---

## üîí 10. SEGURIDAD Y BUENAS PR√ÅCTICAS

### **10.1. Credentials**

- ‚úÖ **uidcliente:** Nunca exponerlo en cliente/frontend
- ‚úÖ **Guardar en variables de entorno** o BD cifrada
- ‚úÖ **Renovar credenciales** peri√≥dicamente
- ‚úÖ **Logs de uso:** Auditar cada llamada a API

### **10.2. Rate Limiting**

- ‚ö†Ô∏è **No exceder 20 env√≠os por llamada** (recomendaci√≥n GLS)
- ‚ö†Ô∏è **Esperar entre requests:** 1-2 segundos
- ‚ö†Ô∏è **Reintentos con backoff:** Si falla, esperar 5s, 10s, 30s

### **10.3. Manejo de Errores**

GLS retorna c√≥digos de error espec√≠ficos (ver GLS-DOC_Shipment_English-OUT.xml):

| C√≥digo | Significado | Acci√≥n |
|--------|-------------|--------|
| **0** | √âxito | Continuar |
| **-1** | Exception | Revisar XML, quitar espacios |
| **-3** | C√≥digo barras duplicado | Usar otro o dejar vac√≠o |
| **-33** | CP inv√°lido o servicio incorrecto | Validar datos |
| **-80 a -88** | Errores EuroBusiness | Validar campos obligatorios |
| **-108 a -111** | Datos remitente <3 chars | Validar longitud |
| **-128 a -131** | Datos destinatario <3 chars | Validar longitud |

### **10.4. Testing**

- ‚úÖ **UID de pruebas:** `6BAB7A53-3B6D-4D5A-9450-702D2FAC0B11`
- ‚úÖ **Crear env√≠os de test** antes de producci√≥n
- ‚úÖ **Validar cada formato de etiqueta** (PDF, ZPL, JPG)
- ‚úÖ **Probar tracking con env√≠os reales**

---

## üìû 11. SOPORTE Y CONTACTO GLS

### **11.1. Datos de tu Cuenta**

- **Cuenta GLS:** 836-312
- **URL API:** https://wsclientes.asmred.com/b2b.asmx
- **UID Cliente:** (en tu configuraci√≥n)

### **11.2. Canales de Soporte**

- **Tel√©fono GLS:** 902 100 010
- **Email:** (solicitar a tu gestor comercial)
- **Portal web:** https://www.gls-spain.es
- **Documentaci√≥n:** Archivos en `/docs/gls/`

---

## üéØ 12. ROADMAP DE IMPLEMENTACI√ìN RECOMENDADO

### **Fase 1: Correcci√≥n y Estabilizaci√≥n (1-2 semanas)**

- [x] Analizar documentaci√≥n oficial
- [ ] Corregir estructura XML de env√≠os
- [ ] Implementar mapeo de provincias
- [ ] Validar todos los campos obligatorios
- [ ] Testing exhaustivo en entorno de pruebas
- [ ] Deploy a producci√≥n

### **Fase 2: Automatizaci√≥n B√°sica (2-3 semanas)**

- [ ] Tracking autom√°tico al crear env√≠o
- [ ] Email "Tu pedido ha sido enviado"
- [ ] Panel de tracking en p√°gina de pedido cliente
- [ ] Bot√≥n "Reimprimir etiqueta" en admin
- [ ] Vista de estados en lista de pedidos admin

### **Fase 3: Tracking Avanzado (3-4 semanas)**

- [ ] Cron job de sincronizaci√≥n estados (cada 1h)
- [ ] Actualizaci√≥n autom√°tica de estados en BD
- [ ] Emails de cambio de estado
- [ ] Vista de incidencias en admin
- [ ] Mostrar POD digitalizado cuando disponible

### **Fase 4: Analytics y Optimizaci√≥n (1-2 meses)**

- [ ] Dashboard de estad√≠sticas de env√≠os
- [ ] KPIs de log√≠stica
- [ ] Alertas proactivas de retrasos
- [ ] Reportes semanales/mensuales
- [ ] Optimizaci√≥n de costes log√≠sticos

### **Fase 5: Funcionalidades Premium (2-3 meses)**

- [ ] Soporte env√≠os internacionales (EuroBusinessParcel)
- [ ] Integraci√≥n ParcelShop con mapa
- [ ] Servicios de reembolso autom√°tico
- [ ] Seguros para pedidos de alto valor
- [ ] Multi-carrier (SEUR, Correos, MRW)

---

## ‚úÖ 13. CONCLUSIONES

### **Capacidades Clave de la API GLS:**

1. ‚úÖ **Completa:** Cubre todo el ciclo de vida del env√≠o
2. ‚úÖ **Robusta:** Documentaci√≥n exhaustiva y ejemplos reales
3. ‚úÖ **Flexible:** M√∫ltiples servicios y opciones
4. ‚úÖ **Trazable:** Tracking en tiempo real con historial completo
5. ‚úÖ **Escalable:** Soporta crecimiento del negocio

### **Impacto para LoviPrintDTF:**

- üöÄ **Reducci√≥n 80% tiempo gesti√≥n env√≠os** - Todo autom√°tico
- üöÄ **Mejora experiencia cliente** - Tracking en tiempo real
- üöÄ **Reducci√≥n incidencias** - Detecci√≥n proactiva de problemas
- üöÄ **Profesionalizaci√≥n** - Imagen de empresa seria y eficiente
- üöÄ **Escalabilidad** - Preparado para crecer sin l√≠mites

### **Recomendaci√≥n Final:**

**Implementar la correcci√≥n COMPLETA del servicio GLS siguiendo la documentaci√≥n oficial.** Los beneficios justifican ampliamente el esfuerzo de desarrollo.

---

**Documento generado:** 22 de Octubre, 2025
**Autor:** An√°lisis t√©cnico basado en documentaci√≥n oficial GLS
**Versi√≥n:** 1.0
